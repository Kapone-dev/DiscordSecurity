"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const database_1 = require("../../database/");
const lib_1 = require("../../lib");
class AddUser extends lib_1.CommandBase {
    constructor() {
        // Name, Category, alias, cooldown
        super('adduser', 'Admin', ["aÃ±adir-usuarios", "add-user"], 15);
    }
    async run(bot, message, args) {
        if (message.author.id !== message.guild.ownerId)
            return message.channel.send(bot.language.global.onlyOwner);
        const lang = bot.language.commands.addUsers;
        const search = await database_1.Registrador.findById(message.guild.id);
        if (!search)
            return message.channel.send(bot.language.global.noSearch);
        const user = message.mentions.users.first() || bot.client.users.cache.get(`${BigInt(args[0])}`) || await bot.client.users.fetch(`${BigInt(args[0])}`).catch(() => null);
        if (!user)
            return message.channel.send(lang.noValido);
        if (search.users.includes(user.id))
            return message.channel.send(lang.yaEsta);
        await database_1.Registrador.findByIdAndUpdate(message.guild.id, { $push: { users: user.id } });
        message.channel.send(lang.agregado + user.tag);
    }
}
exports.default = AddUser;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYWRkLXVzZXJzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2NvbW1hbmRzL2FkbWluL2FkZC11c2Vycy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLDhDQUE0QztBQUM1QyxtQ0FBd0M7QUFHeEMsTUFBcUIsT0FBUSxTQUFRLGlCQUFXO0lBQzVDO1FBQ0ksa0NBQWtDO1FBQ2xDLEtBQUssQ0FBQyxTQUFTLEVBQUUsT0FBTyxFQUFFLENBQUMsaUJBQWlCLEVBQUUsVUFBVSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUE7SUFDbEUsQ0FBQztJQUNELEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBUSxFQUFFLE9BQWdCLEVBQUUsSUFBbUI7UUFFckQsSUFBSSxPQUFPLENBQUMsTUFBTSxDQUFDLEVBQUUsS0FBSyxPQUFPLENBQUMsS0FBSyxDQUFDLE9BQU87WUFBRSxPQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQzVHLE1BQU0sSUFBSSxHQUFHLEdBQUcsQ0FBQyxRQUFRLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQztRQUM1QyxNQUFNLE1BQU0sR0FBRyxNQUFNLHNCQUFXLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDNUQsSUFBSSxDQUFDLE1BQU07WUFBRSxPQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQ3ZFLE1BQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLEtBQUssRUFBRSxJQUFJLEdBQUcsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxJQUFJLE1BQU0sR0FBRyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDeEssSUFBSSxDQUFDLElBQUk7WUFBRSxPQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUN0RCxJQUFJLE1BQU0sQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7WUFBRSxPQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztRQUM3RSxNQUFNLHNCQUFXLENBQUMsaUJBQWlCLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUNyRixPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNuRCxDQUFDO0NBQ0o7QUFqQkQsMEJBaUJDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtSZWdpc3RyYWRvcn0gZnJvbSBcIi4uLy4uL2RhdGFiYXNlL1wiO1xyXG5pbXBvcnQgeyBDb21tYW5kQmFzZSB9IGZyb20gJy4uLy4uL2xpYic7XHJcbmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tIFwiZGlzY29yZC5qc1wiO1xyXG5pbXBvcnQgQm90IGZyb20gXCIuLi8uLi9ib3RcIjtcclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQWRkVXNlciBleHRlbmRzIENvbW1hbmRCYXNlIHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIC8vIE5hbWUsIENhdGVnb3J5LCBhbGlhcywgY29vbGRvd25cclxuICAgICAgICBzdXBlcignYWRkdXNlcicsICdBZG1pbicsIFtcImHDsWFkaXItdXN1YXJpb3NcIiwgXCJhZGQtdXNlclwiXSwgMTUpXHJcbiAgICB9XHJcbiAgICBhc3luYyBydW4oYm90OiBCb3QsIG1lc3NhZ2U6IE1lc3NhZ2UsIGFyZ3M6IEFycmF5PHN0cmluZz4pIHtcclxuXHJcbiAgICAgICAgaWYgKG1lc3NhZ2UuYXV0aG9yLmlkICE9PSBtZXNzYWdlLmd1aWxkLm93bmVySWQpIHJldHVybiBtZXNzYWdlLmNoYW5uZWwuc2VuZChib3QubGFuZ3VhZ2UuZ2xvYmFsLm9ubHlPd25lcik7XHJcbiAgICAgICAgY29uc3QgbGFuZyA9IGJvdC5sYW5ndWFnZS5jb21tYW5kcy5hZGRVc2VycztcclxuICAgICAgICBjb25zdCBzZWFyY2ggPSBhd2FpdCBSZWdpc3RyYWRvci5maW5kQnlJZChtZXNzYWdlLmd1aWxkLmlkKTtcclxuICAgICAgICBpZiAoIXNlYXJjaCkgcmV0dXJuIG1lc3NhZ2UuY2hhbm5lbC5zZW5kKGJvdC5sYW5ndWFnZS5nbG9iYWwubm9TZWFyY2gpO1xyXG4gICAgICAgIGNvbnN0IHVzZXIgPSBtZXNzYWdlLm1lbnRpb25zLnVzZXJzLmZpcnN0KCkgfHwgYm90LmNsaWVudC51c2Vycy5jYWNoZS5nZXQoYCR7QmlnSW50KGFyZ3NbMF0pfWApIHx8IGF3YWl0IGJvdC5jbGllbnQudXNlcnMuZmV0Y2goYCR7QmlnSW50KGFyZ3NbMF0pfWApLmNhdGNoKCgpID0+IG51bGwpO1xyXG4gICAgICAgIGlmICghdXNlcikgcmV0dXJuIG1lc3NhZ2UuY2hhbm5lbC5zZW5kKGxhbmcubm9WYWxpZG8pO1xyXG4gICAgICAgIGlmIChzZWFyY2gudXNlcnMuaW5jbHVkZXModXNlci5pZCkpIHJldHVybiBtZXNzYWdlLmNoYW5uZWwuc2VuZChsYW5nLnlhRXN0YSk7XHJcbiAgICAgICAgYXdhaXQgUmVnaXN0cmFkb3IuZmluZEJ5SWRBbmRVcGRhdGUobWVzc2FnZS5ndWlsZC5pZCwgeyAkcHVzaDogeyB1c2VyczogdXNlci5pZCB9IH0pO1xyXG4gICAgICAgIG1lc3NhZ2UuY2hhbm5lbC5zZW5kKGxhbmcuYWdyZWdhZG8gKyB1c2VyLnRhZyk7XHJcbiAgICB9XHJcbn0iXX0=